# Name: ACME Certificate Browser
# Description: List domains and certificate expiry
# Category: ACME
# Version: 1.0.0
# Requires: openssl

plugin_run() {
  CERT_DIR="${CERTS_DIR/letsencrypt/live"

  clear
  echo "ACME CERTIFICATES"
  echo

  for d in "$CERT_DIR"/*; do
    [ -d "$d" ] || continue
    domain=$(basename "$d")
    echo "Domain: $domain"
    openssl x509 -in "$d/fullchain.pem" -noout -enddate 2>/dev/null
    echo
  done

  pause
}
